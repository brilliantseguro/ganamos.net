<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>¡Reclama tu Bono! | WhatsApp Redirección</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Pixel Meta -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n; n.push=n; n.loaded=!0; n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '587660557560617');
    fbq('track', 'PageView');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=587660557560617&ev=PageView&noscript=1"/>
  </noscript>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #ffffff;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      color: #075e54;
    }

    h1 {
      font-size: 1.4rem;
      text-align: center;
      padding: 20px;
      color: #128c7e;
    }

    .claim-btn {
      padding: 20px 40px;
      font-size: 1.6rem;
      font-weight: bold;
      color: #fff;
      background-color: #25D366;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(37, 211, 102, 0.4);
      transition: background-color 0.2s ease;
    }

    .claim-btn:disabled {
      background-color: #a8daba;
      cursor: wait;
    }

    .claim-btn:hover:not(:disabled) {
      background-color: #20c15c;
    }

    .footer {
      margin-top: 40px;
      font-size: 0.9rem;
      color: #999;
    }
  </style>
</head>
<body>

  <h1>¡Estás a un paso de tu bono exclusivo del 20%!</h1>

  <button id="claimBtn" class="claim-btn">
    Reclama tu bono del 20%
  </button>

  <div class="footer">
    Serás redirigido a WhatsApp
  </div>

  <script>
    const whatsappNumber = "3413673839";
    const whatsappLink = `https://wa.me/${whatsappNumber}?text=Hola!%20Quiero%20reclamar%20mi%20bono%20de%20casino`;

    function handleClaimClick(e) {
      if (e) e.preventDefault();
      const btn = document.getElementById('claimBtn');
      btn.innerText = 'Redirigiendo a WhatsApp...';
      btn.disabled = true;

      setTimeout(function(){
        window.location.href = whatsappLink;
      }, 2500);

      // Pixel Meta
      if (typeof fbq === 'function') {
        fbq('trackCustom', 'ClickWhatsAap');
      }

      // Conversion API
      try {
        const eventData = {
          event_name: 'ClickWhatsAap',
          event_source_url: window.location.href,
          user_data: {
            client_user_agent: navigator.userAgent
          }
        };
        const blob = new Blob([JSON.stringify(eventData)], {type: 'application/json'});
        if (navigator.sendBeacon) {
          navigator.sendBeacon('https://conversion-api-pipe.vercel.app/api/conversion', blob);
        } else {
          fetch('https://conversion-api-pipe.vercel.app/api/conversion', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(eventData)
          });
        }
      } catch (err) {}
    }

    document.getElementById('claimBtn').addEventListener('click', handleClaimClick, {passive:false});
    document.getElementById('claimBtn').addEventListener('touchstart', handleClaimClick, {passive:true});
  </script>
</body>
</html>
